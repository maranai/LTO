/* jQuery plugin textselect
 * version: 1.0
 * tested on jQuery 1.3.2, 1.5
 * author: josef.moravec@gmail.com, duane.johnson@gmail.com
 */
(function(e){e.fn.selectText=function(){var t=this[0];if(e.browser.msie){var n=t.offsetParent.createTextRange();n.moveToElementText(t),n.select()}else if(e.browser.mozilla||e.browser.opera){var r=t.ownerDocument.defaultView.getSelection(),n=t.ownerDocument.createRange();n.selectNodeContents(t),r.removeAllRanges(),r.addRange(n)}else if(e.browser.safari){var r=t.ownerDocument.defaultView.getSelection();r.setBaseAndExtent(t,0,t,1)}return this},e.event.special.textselect={setup:function(t,n){e(this).data("textselected",!1),e(this).bind("mouseup",e.event.special.textselect.handler)},teardown:function(t){e(this).unbind("mouseup",e.event.special.textselect.handler)},handler:function(t){var n=e.event.special.textselect.getSelectedText().toString();n!=""&&(e(this).data("textselected",!0),t.type="textselect",t.text=n,e.event.handle.apply(this,arguments))},getSelectedText:function(){var e="";return window.getSelection?e=window.getSelection():document.getSelection?e=document.getSelection():document.selection&&(e=document.selection.createRange().text),e}},e.event.special.textunselect={setup:function(t,n){e(this).data("textselected",!1),e(this).bind("mouseup",e.event.special.textunselect.handler),e(this).bind("keyup",e.event.special.textunselect.handlerKey)},teardown:function(t){e(this).unbind("mouseup",e.event.special.textunselect.handler)},handler:function(t){if(e(this).data("textselected")){var n=e.event.special.textselect.getSelectedText().toString();n==""&&(e(this).data("textselected",!1),t.type="textunselect",e.event.handle.apply(this,arguments))}},handlerKey:function(t){if(e(this).data("textselected")){var n=e.event.special.textselect.getSelectedText().toString();t.keyCode==27&&n==""&&(e(this).data("textselected",!1),t.type="textunselect",e.event.handle.apply(this,arguments))}}}})(jQuery);